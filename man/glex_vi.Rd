% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/glex_vi.R
\name{glex_vi}
\alias{glex_vi}
\title{Variable Importance for Main and Interaction Terms}
\usage{
glex_vi(object, ...)
}
\arguments{
\item{object}{Object of class \code{glex}.}

\item{...}{(Unused)}
}
\value{
A \code{\link{data.table}} with columns:
\itemize{
\item \code{degree} (\code{integer}): Degree of interaction of the \code{term}, with \code{1} being main effects,
\code{2} being 2-degree interactions etc.
\item \code{term} (\code{character}): Model term, e.g. main effect \code{x1} or interaction term \code{x1:x2}, \code{x1:x3:x5} etc.
\item \code{class} (\code{factor}): For multiclass targets only: The associated target class. Lists all classes in the
target, not limited to the majority vote.
\item \code{m} (\code{numeric}): Average absolute contribution of \code{term}, see Details.
\item \code{m_rel} (\code{numeric}): \code{m} but relative to the average prediction (\code{intercept} in \code{glex()} output).
}
}
\description{
Variable Importance for Main and Interaction Terms
}
\details{
The \code{m} reported here is the average absolute value of \code{m} as reported by \code{glex()}, aggregated by \code{term}:

\deqn{\mathtt{m} = \frac{1}{n} \sum_{i = 1}^n |m| }

In turn, \code{m_rel} rescales \code{m} by the average prediction of the model (\eqn{m_0}, \code{intercept} as reported by \code{glex()}):

\deqn{\mathtt{m\_rel} = \frac{\mathtt{m}}{m_0}}
}
\examples{
set.seed(1)
# Random Planted Forest -----
if (requireNamespace("randomPlantedForest", quietly = TRUE)) {
library(randomPlantedForest)

rp <- rpf(mpg ~ ., data = mtcars[1:26, ], max_interaction = 3)

glex_rpf <- glex(rp, mtcars[27:32, ])

# All terms
vi_rpf <- glex_vi(glex_rpf)

library(ggplot2)
# Filter to contributions greater 0.05 on the scale of the target
autoplot(vi_rpf, threshold = 0.05)
# Summarize by degree of interaction
autoplot(vi_rpf, by_degree = TRUE)
# Filter by relative contributions greater 0.1\%
autoplot(vi_rpf, scale = "relative", threshold = 0.001)
}

# xgboost -----
if (requireNamespace("xgboost", quietly = TRUE)) {
library(xgboost)
x <- as.matrix(mtcars[, -1])
y <- mtcars$mpg
xg <- xgboost(data = x[1:26, ], label = y[1:26],
              params = list(max_depth = 4, eta = .1),
              nrounds = 10, verbose = 0)
glex_xgb <- glex(xg, x[27:32, ])
vi_xgb <- glex_vi(glex_xgb)

library(ggplot2)
autoplot(vi_xgb)
autoplot(vi_xgb, by_degree = TRUE)
}
}
\seealso{
\link{autoplot.glex_vi}
}
